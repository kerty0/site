doctype html
html
    head
        block headers
            meta(charset="UTF-8")
            meta(name="viewport" content="width=device-width, initial-scale=1.0")
            title="My cat"
            link(rel="icon" href="static/favicon.ico")
            //link(rel="preconnect" href="https://fonts.googleapis.com")
            //link(rel="preconnect" href="https://fonts.gstatic.com" crossorigin)
            //link(href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:ital,wght@0,100..800;1,100..800&family=Pixelify+Sans:wght@400..700&display=swap" rel="stylesheet")
            //link(rel="prefetch" href="home")
            //link(rel="prefetch" href="about")
            //link(rel="prefetch" href="contact")
            script.
                let theme = localStorage.getItem('theme') || (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');
                document.documentElement.setAttribute('data-theme', theme);
            style
                include ../style.css
    body
        include header
        main
            div.title
                div
                h1
                    block title
                div(style="flex-grow: 1")
            block main
        include footer
        script.
            document.querySelectorAll('main img').forEach((img) => {
                img.style.maxHeight = `${window.outerHeight * 0.5}px`;
                img.addEventListener('click', () => {
                    if (document.querySelector('.view')) {
                        return;
                    }
                    let viewDiv = document.createElement('div');
                    viewDiv.classList.add('view');
                    let viewImg = document.createElement('img');
                    viewImg.src = img.src;
                    viewImg.alt = img.alt;
                    viewDiv.appendChild(viewImg);
                    document.body.appendChild(viewDiv);

                    function closeViewer() {
                        document.body.removeChild(viewDiv);
                        document.removeEventListener('keydown', handleEscape);
                    };

                    function handleEscape(event) {
                        if (event.key === 'Escape') {
                            closeViewer();
                        }
                    };

                    document.addEventListener('keydown', handleEscape);
                    viewDiv.addEventListener('click', closeViewer);
                });
                // img.addEventLi
            });